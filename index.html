<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨ Premium AI Dashboard - Zero Command</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM via CDN -->
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.23.5/babel.min.js"></script>
    
    <!-- Framer Motion via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/framer-motion@10.16.4/dist/framer-motion.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at 20% 30%, #1a1a2e, #0a0a0f);
            color: #fff;
            min-height: 100vh;
        }

        .glass-premium {
            background: rgba(15, 15, 25, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .glass-card-premium {
            background: rgba(25, 25, 35, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card-premium:hover {
            border-color: rgba(139, 92, 246, 0.3);
            background: rgba(35, 35, 45, 0.7);
            transform: translateY(-2px);
        }

        .gradient-text-premium {
            background: linear-gradient(135deg, #c084fc, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .input-premium {
            background: rgba(20, 20, 30, 0.8);
            border: 1.5px solid rgba(255, 255, 255, 0.08);
            border-radius: 30px;
            padding: 14px 24px;
            color: white;
            font-size: 15px;
            transition: all 0.3s ease;
            width: 100%;
            outline: none;
        }

        .input-premium:focus {
            border-color: #8b5cf6;
            background: rgba(30, 30, 40, 0.95);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        .btn-premium {
            background: linear-gradient(135deg, #8b5cf6, #d946ef);
            border: none;
            border-radius: 30px;
            padding: 12px 28px;
            color: white;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px -8px rgba(139, 92, 246, 0.6);
        }

        .btn-outline-premium {
            background: transparent;
            border: 1.5px solid rgba(139, 92, 246, 0.5);
            border-radius: 30px;
            padding: 10px 20px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-outline-premium:hover {
            border-color: #8b5cf6;
            background: rgba(139, 92, 246, 0.1);
        }

        .sidebar-premium {
            background: rgba(8, 8, 12, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }

        .chat-item {
            padding: 14px 16px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 4px;
            border: 1px solid transparent;
        }

        .chat-item:hover {
            background: rgba(139, 92, 246, 0.15);
            color: white;
            border-color: rgba(139, 92, 246, 0.3);
        }

        .chat-item.active {
            background: linear-gradient(90deg, rgba(139, 92, 246, 0.2), transparent);
            border-left: 4px solid #8b5cf6;
            color: white;
        }

        .message-user {
            background: linear-gradient(135deg, #7c3aed, #c026d3);
            color: white;
            border-radius: 24px 24px 4px 24px;
            padding: 16px 20px;
            max-width: 70%;
            box-shadow: 0 8px 16px rgba(124, 58, 237, 0.3);
        }

        .message-assistant {
            background: rgba(30, 30, 40, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px 24px 24px 4px;
            padding: 16px 20px;
            max-width: 70%;
            color: rgba(255, 255, 255, 0.9);
        }

        .typing-indicator {
            display: flex;
            gap: 6px;
            padding: 16px 24px;
            background: rgba(30, 30, 40, 0.6);
            border-radius: 40px;
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #8b5cf6;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        .scrollbar-premium::-webkit-scrollbar {
            width: 6px;
        }

        .scrollbar-premium::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
        }

        .scrollbar-premium::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 10px;
        }

        .scrollbar-premium::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ==============================================
        // PREMIUM AI DASHBOARD - ZERO COMMAND DEPLOYMENT
        // ==============================================
        
        const { useState, useEffect, useRef } = React;

        // ========== ICONS ==========
        const Icons = {
            Send: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg>`,
            Plus: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>`,
            Settings: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H5.78a1.65 1.65 0 0 0-1.51 1 1.65 1.65 0 0 0 .33 1.82l.04.04A10 10 0 0 0 12 17.66a10 10 0 0 0 7.36-2.62l.04-.04z"/></svg>`,
            Image: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L6 21"/></svg>`,
            Video: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M10 10l5 3-5 3v-6z"/></svg>`,
            Menu: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16"/></svg>`,
            History: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
            Key: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2l-2 2m-7.5 7.5L21 2"/><circle cx="8" cy="16" r="4"/><path d="M16 10l4-4"/></svg>`,
            Check: () => `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>`
        };

        // ========== API CONFIGURATION ==========
        const ENV = {
            VITE_GROQ_KEY: "${VITE_GROQ_KEY}",
            VITE_OPENROUTER_KEY: "${VITE_OPENROUTER_KEY}",
            VITE_GOOGLE_KEY: "${VITE_GOOGLE_KEY}",
            VITE_OPENAI_KEY: "${VITE_OPENAI_KEY}",
            VITE_TAVILY_KEY: "${VITE_TAVILY_KEY}",
            VITE_FIRECRAWL_KEY: "${VITE_FIRECRAWL_KEY}",
            VITE_JSON2VIDEO_KEY: "${VITE_JSON2VIDEO_KEY}",
            VITE_SISIF_KEY: "${VITE_SISIF_KEY}"
        };

        // ========== SHARED MEMORY CONTEXT ==========
        const useSharedMemory = () => {
            const [globalSummary, setGlobalSummary] = useState(() => {
                try {
                    return localStorage.getItem('ai_global_summary') || 'âœ¨ Premium AI Assistant ready. No conversation history yet.';
                } catch {
                    return 'âœ¨ Premium AI Assistant ready. No conversation history yet.';
                }
            });

            const updateSummary = (newSummary) => {
                setGlobalSummary(newSummary);
                try {
                    localStorage.setItem('ai_global_summary', newSummary);
                } catch (e) {
                    console.error('Storage failed:', e);
                }
            };

            return { globalSummary, updateSummary };
        };

        // ========== CHAT STORE ==========
        const createChatStore = () => {
            let state = {
                chats: [],
                currentChatId: null,
                messages: [],
                isLoading: false,
                showSettings: false,
                sidebarOpen: true,
                apiKeys: { ...ENV }
            };

            try {
                const saved = localStorage.getItem('ai_chats_v2');
                if (saved) {
                    state.chats = JSON.parse(saved);
                }
            } catch (e) {
                console.error('Failed to load chats:', e);
            }

            if (state.chats.length === 0) {
                const welcomeChat = {
                    id: 'welcome-' + Date.now(),
                    title: 'âœ¨ Welcome',
                    messages: [{
                        id: 'welcome-msg',
                        role: 'assistant',
                        content: 'ðŸŒŸ Hello! I\'m your Premium AI Assistant. I can:\n\nâ€¢ ðŸ’¬ Chat using Groq/OpenRouter\nâ€¢ ðŸŽ¨ Generate images with /image prompt\nâ€¢ ðŸ§  Remember context across sessions\nâ€¢ ðŸ”‘ Manage all API keys in settings\n\nHow can I help you today?',
                        timestamp: new Date().toISOString()
                    }],
                    createdAt: new Date().toISOString()
                };
                state.chats = [welcomeChat];
                state.currentChatId = welcomeChat.id;
                state.messages = welcomeChat.messages;
            }

            const listeners = new Set();

            const setState = (newState) => {
                state = { ...state, ...newState };
                try {
                    localStorage.setItem('ai_chats_v2', JSON.stringify(state.chats));
                } catch (e) {
                    console.error('Failed to save chats:', e);
                }
                listeners.forEach(fn => fn(state));
            };

            return {
                subscribe: (fn) => {
                    listeners.add(fn);
                    fn(state);
                    return () => listeners.delete(fn);
                },
                getState: () => state,
                addChat: () => {
                    const newChat = {
                        id: 'chat-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                        title: 'ðŸ’­ New Conversation',
                        messages: [{
                            id: 'msg-' + Date.now(),
                            role: 'assistant',
                            content: 'ðŸ‘‹ Hello! How can I assist you today?',
                            timestamp: new Date().toISOString()
                        }],
                        createdAt: new Date().toISOString()
                    };
                    setState({
                        chats: [...state.chats, newChat],
                        currentChatId: newChat.id,
                        messages: newChat.messages
                    });
                    return newChat;
                },
                setCurrentChat: (chatId) => {
                    const chat = state.chats.find(c => c.id === chatId);
                    if (chat) {
                        setState({ currentChatId: chatId, messages: chat.messages });
                    }
                },
                addMessage: (chatId, message) => {
                    const updatedChats = state.chats.map(chat => {
                        if (chat.id === chatId) {
                            return { ...chat, messages: [...chat.messages, message] };
                        }
                        return chat;
                    });
                    setState({ 
                        chats: updatedChats, 
                        messages: updatedChats.find(c => c.id === chatId)?.messages || [] 
                    });
                },
                updateChatTitle: (chatId, title) => {
                    const updatedChats = state.chats.map(chat => {
                        if (chat.id === chatId) {
                            return { ...chat, title };
                        }
                        return chat;
                    });
                    setState({ chats: updatedChats });
                },
                updateApiKeys: (keys) => {
                    setState({ apiKeys: { ...state.apiKeys, ...keys } });
                },
                toggleSettings: () => {
                    setState({ showSettings: !state.showSettings });
                },
                toggleSidebar: () => {
                    setState({ sidebarOpen: !state.sidebarOpen });
                }
            };
        };

        const chatStore = createChatStore();

        // ========== MAIN APP ==========
        const App = () => {
            const [state, setState] = useState(chatStore.getState());
            const [inputValue, setInputValue] = useState('');
            const messagesEndRef = useRef(null);
            const { globalSummary, updateSummary } = useSharedMemory();

            useEffect(() => {
                const unsubscribe = chatStore.subscribe(setState);
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [state.messages]);

            const generateTitle = async (message) => {
                if (!state.apiKeys.VITE_GROQ_KEY) return 'ðŸ’­ New Chat';
                try {
                    const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${state.apiKeys.VITE_GROQ_KEY}`
                        },
                        body: JSON.stringify({
                            model: 'llama-3.3-70b-versatile',
                            messages: [
                                { role: 'system', content: 'Generate a 3-4 word title for this message. Only respond with the title, no punctuation or extra words.' },
                                { role: 'user', content: message }
                            ],
                            temperature: 0.7,
                            max_tokens: 10
                        })
                    });
                    const data = await response.json();
                    return data.choices?.[0]?.message?.content || 'ðŸ’­ New Chat';
                } catch {
                    return 'ðŸ’­ New Chat';
                }
            };

            const callAI = async (messages) => {
                // Try Groq first
                if (state.apiKeys.VITE_GROQ_KEY) {
                    try {
                        const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${state.apiKeys.VITE_GROQ_KEY}`
                            },
                            body: JSON.stringify({
                                model: 'llama-3.3-70b-versatile',
                                messages: messages,
                                temperature: 0.7,
                                max_tokens: 1024
                            })
                        });
                        if (response.ok) {
                            const data = await response.json();
                            return data.choices[0].message.content;
                        }
                    } catch (e) {
                        console.log('Groq failed, trying OpenRouter...', e);
                    }
                }

                // Fallback to OpenRouter
                if (state.apiKeys.VITE_OPENROUTER_KEY) {
                    try {
                        const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${state.apiKeys.VITE_OPENROUTER_KEY}`,
                                'HTTP-Referer': window.location.origin,
                                'X-Title': 'Premium AI Dashboard'
                            },
                            body: JSON.stringify({
                                model: 'google/gemini-2.0-flash-exp:free',
                                messages: messages,
                                temperature: 0.7,
                                max_tokens: 1024
                            })
                        });
                        const data = await response.json();
                        return data.choices[0].message.content;
                    } catch (e) {
                        console.log('OpenRouter failed:', e);
                    }
                }

                return 'âš ï¸ AI service unavailable. Please check your API keys in Settings.';
            };

            const generateImage = async (prompt) => {
                // Try OpenAI first
                if (state.apiKeys.VITE_OPENAI_KEY) {
                    try {
                        const response = await fetch('https://api.openai.com/v1/images/generations', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${state.apiKeys.VITE_OPENAI_KEY}`
                            },
                            body: JSON.stringify({
                                model: 'dall-e-3',
                                prompt: prompt,
                                n: 1,
                                size: '1024x1024'
                            })
                        });
                        if (response.ok) {
                            const data = await response.json();
                            return data.data[0].url;
                        }
                    } catch (e) {
                        console.log('OpenAI image failed, trying Google...', e);
                    }
                }

                // Fallback to Google
                if (state.apiKeys.VITE_GOOGLE_KEY) {
                    try {
                        return `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?width=1024&height=1024&nologo=true`;
                    } catch (e) {
                        console.log('Google image failed:', e);
                    }
                }

                return null;
            };

            const handleSendMessage = async () => {
                if (!inputValue.trim() || !state.currentChatId || state.isLoading) return;

                const userMessage = {
                    id: 'msg-' + Date.now(),
                    role: 'user',
                    content: inputValue.trim(),
                    timestamp: new Date().toISOString()
                };

                chatStore.addMessage(state.currentChatId, userMessage);
                setInputValue('');
                chatStore.setState({ isLoading: true });

                const currentChat = state.chats.find(c => c.id === state.currentChatId);
                if (currentChat?.messages.length === 1) {
                    const title = await generateTitle(inputValue);
                    chatStore.updateChatTitle(state.currentChatId, title);
                }

                // Image Generation
                if (inputValue.toLowerCase().startsWith('/image ')) {
                    const prompt = inputValue.replace('/image ', '');
                    const imageUrl = await generateImage(prompt);
                    
                    const assistantMessage = {
                        id: 'msg-' + Date.now() + 1,
                        role: 'assistant',
                        content: imageUrl ? 
                            `ðŸŽ¨ Generated image for: "${prompt}"\n\n![Generated Image](${imageUrl})` : 
                            'âŒ Failed to generate image. Please check your OpenAI or Google API keys.',
                        timestamp: new Date().toISOString()
                    };
                    
                    chatStore.addMessage(state.currentChatId, assistantMessage);
                    chatStore.setState({ isLoading: false });
                    return;
                }

                // Regular Chat with Context
                const contextMessages = [
                    {
                        role: 'system',
                        content: `You are a premium AI assistant. Previous conversation summary: ${globalSummary}. Current query: ${inputValue}`
                    },
                    ...state.messages.slice(-6).map(m => ({
                        role: m.role,
                        content: m.content.substring(0, 500)
                    })),
                    { role: 'user', content: inputValue }
                ];

                const aiResponse = await callAI(contextMessages);
                
                // Update global memory
                updateSummary(`${globalSummary}\nâ€¢ ðŸ‘¤ User: ${inputValue.substring(0, 100)}\nâ€¢ ðŸ¤– AI: ${aiResponse.substring(0, 100)}...`);

                const assistantMessage = {
                    id: 'msg-' + Date.now() + 1,
                    role: 'assistant',
                    content: aiResponse,
                    timestamp: new Date().toISOString()
                };

                chatStore.addMessage(state.currentChatId, assistantMessage);
                chatStore.setState({ isLoading: false });
            };

            const currentChat = state.chats.find(c => c.id === state.currentChatId);

            return (
                <div className="flex h-screen overflow-hidden">
                    {/* Premium Sidebar */}
                    {state.sidebarOpen && (
                        <div className="w-80 sidebar-premium flex flex-col h-full">
                            <div className="p-5">
                                <button 
                                    onClick={() => chatStore.addChat()}
                                    className="btn-premium w-full justify-center"
                                    dangerouslySetInnerHTML={{ __html: Icons.Plus() + ' New Conversation' }}
                                />
                            </div>

                            <div className="flex-1 overflow-y-auto scrollbar-premium px-3">
                                {state.chats.slice().reverse().map(chat => (
                                    <div
                                        key={chat.id}
                                        onClick={() => chatStore.setCurrentChat(chat.id)}
                                        className={`chat-item ${state.currentChatId === chat.id ? 'active' : ''}`}
                                    >
                                        <div className="flex items-center gap-3">
                                            <span dangerouslySetInnerHTML={{ __html: Icons.History() }} />
                                            <span className="truncate font-medium">{chat.title}</span>
                                        </div>
                                        <div className="text-xs text-white/40 mt-1 ml-7">
                                            {new Date(chat.createdAt).toLocaleDateString()}
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className="p-4 border-t border-white/10">
                                <button 
                                    onClick={() => chatStore.toggleSettings()}
                                    className={`chat-item w-full flex items-center gap-3 ${state.showSettings ? 'active' : ''}`}
                                    dangerouslySetInnerHTML={{ __html: Icons.Settings() + ' Settings ' + (state.showSettings ? 'âš¡' : '') }}
                                />
                                
                                {state.showSettings && (
                                    <div className="mt-4 glass-premium p-5 space-y-4">
                                        <div className="flex items-center gap-2 text-purple-400">
                                            <span dangerouslySetInnerHTML={{ __html: Icons.Key() }} />
                                            <h3 className="font-semibold">API Configuration</h3>
                                        </div>
                                        {['VITE_GROQ_KEY', 'VITE_OPENROUTER_KEY', 'VITE_OPENAI_KEY', 'VITE_GOOGLE_KEY'].map(key => (
                                            <div key={key} className="space-y-1.5">
                                                <label className="text-xs text-white/50 block">
                                                    {key.replace('VITE_', '').replace('_KEY', '')}
                                                </label>
                                                <input
                                                    type="password"
                                                    value={state.apiKeys[key] || ''}
                                                    onChange={(e) => {
                                                        const newKeys = { ...state.apiKeys, [key]: e.target.value };
                                                        chatStore.updateApiKeys(newKeys);
                                                    }}
                                                    className="input-premium text-sm py-2 px-4"
                                                    placeholder={`Enter ${key.replace('VITE_', '').replace('_KEY', '')} key`}
                                                />
                                            </div>
                                        ))}
                                        <div className="text-xs text-green-400 flex items-center gap-1 mt-2">
                                            <span dangerouslySetInnerHTML={{ __html: Icons.Check() }} />
                                            Keys saved locally
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Main Chat Area */}
                    <div className="flex-1 flex flex-col h-full relative">
                        {/* Header */}
                        <div className="glass-premium mx-5 mt-5 px-6 py-4 flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                <button 
                                    onClick={() => chatStore.toggleSidebar()}
                                    className="text-white/50 hover:text-white transition"
                                    dangerouslySetInnerHTML={{ __html: Icons.Menu() }}
                                />
                                <div>
                                    <h1 className="text-xl font-bold gradient-text-premium">
                                        {currentChat?.title || 'AI Dashboard'}
                                    </h1>
                                    <p className="text-xs text-white/40 mt-0.5">
                                        {state.messages.length} messages â€¢ Global Memory Active
                                    </p>
                                </div>
                            </div>
                            <div className="flex gap-3">
                                <button className="btn-outline-premium text-sm flex items-center gap-2">
                                    <span dangerouslySetInnerHTML={{ __html: Icons.Video() }} />
                                    Json2Video
                                </button>
                                <button className="btn-outline-premium text-sm flex items-center gap-2">
                                    <span dangerouslySetInnerHTML={{ __html: Icons.Video() }} />
                                    Sisif
                                </button>
                            </div>
                        </div>

                        {/* Messages */}
                        <div className="flex-1 overflow-y-auto scrollbar-premium p-6 space-y-6">
                            {state.messages.map((msg, idx) => (
                                <div
                                    key={msg.id || idx}
                                    className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}
                                >
                                    <div className={msg.role === 'user' ? 'message-user' : 'message-assistant'}>
                                        {msg.content.includes('![Generated Image]') ? (
                                            <div className="space-y-3">
                                                <p className="text-sm opacity-90">{msg.content.split('\n')[0]}</p>
                                                <img 
                                                    src={msg.content.match(/\((.*?)\)/)?.[1]} 
                                                    className="rounded-2xl border border-white/10 max-w-full"
                                                    alt="Generated"
                                                    onError={(e) => {
                                                        e.target.src = 'https://via.placeholder.com/512x512/1a1a2e/8b5cf6?text=âœ¨+Generated+Image';
                                                    }}
                                                />
                                            </div>
                                        ) : (
                                            <p className="whitespace-pre-wrap text-[15px] leading-relaxed">{msg.content}</p>
                                        )}
                                        <div className="text-[10px] text-white/40 mt-2">
                                            {new Date(msg.timestamp).toLocaleTimeString()}
                                        </div>
                                    </div>
                                </div>
                            ))}
                            
                            {state.isLoading && (
                                <div className="flex justify-start">
                                    <div className="typing-indicator">
                                        <div className="typing-dot" style={{ animationDelay: '0s' }}></div>
                                        <div className="typing-dot" style={{ animationDelay: '0.2s' }}></div>
                                        <div className="typing-dot" style={{ animationDelay: '0.4s' }}></div>
                                    </div>
                                </div>
                            )}
                            <div ref={messagesEndRef} />
                        </div>

                        {/* Input Area */}
                        <div className="glass-premium mx-5 mb-5 p-4">
                            <div className="flex gap-3">
                                <input
                                    type="text"
                                    value={inputValue}
                                    onChange={(e) => setInputValue(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && !e.shiftKey && handleSendMessage()}
                                    placeholder="Type /image to generate images or ask anything..."
                                    className="input-premium"
                                    disabled={state.isLoading}
                                />
                                <button
                                    onClick={handleSendMessage}
                                    disabled={state.isLoading || !inputValue.trim()}
                                    className="btn-premium disabled:opacity-50 disabled:hover:transform-none"
                                    dangerouslySetInnerHTML={{ __html: Icons.Send() + ' Send' }}
                                />
                            </div>
                            <div className="flex justify-between mt-3 text-xs text-white/30">
                                <div className="flex gap-3">
                                    <span>âœ¨ Groq</span>
                                    <span>â€¢</span>
                                    <span>ðŸ”„ OpenRouter</span>
                                    <span>â€¢</span>
                                    <span>ðŸŽ¨ DALL-E</span>
                                    <span>â€¢</span>
                                    <span>ðŸ“¸ Gemini</span>
                                </div>
                                <div className="flex items-center gap-1">
                                    <span className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                                    <span>Auto-fallback enabled</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render App
        const root = document.getElementById('root');
        ReactDOM.createRoot(root).render(<App />);
    </script>
</body>
</html>
